git diff --cached --name-status | while read st file; do
	#
	# Skip deleted files
	# 
	if [ "$st" == 'D' ]; then continue; fi

	#
	# Rule 1: No .env files
	#
	if [[ "$file" == ".env" ]]; then
		echo "You are not allowed to commit .env files. This poses a security risk."
		exit 1
	fi

	#
	# Rule 2: Shopify creds
	#
	if grep -i 'API_KEY\s*=\s*["`]*[^"`]'; then
		echo "It looks like you are attempting to set an API key in $file. This is not allowed."
		exit 1
	fi
done

